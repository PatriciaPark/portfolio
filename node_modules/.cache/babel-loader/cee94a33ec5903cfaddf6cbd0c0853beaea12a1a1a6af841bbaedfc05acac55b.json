{"ast":null,"code":"import{useEffect,useRef,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Game(){const canvasRef=useRef(null);const[canvasSize,setCanvasSize]=useState({width:400,height:300});// 브릭걸 위치 및 이동 관련\nconst girlX=30;const girlYRef=useRef(150);const girlSpeed=4;const keys=useRef({up:false,down:false});// 스프라이트 애니메이션 관련 설정\nconst spriteRef=useRef(new Image());const frameWidth=335;// Math.floor(1024 / 3) = 341\nconst frameHeight=512;// Math.floor(1024 / 2) = 512\nconst numCols=3;// 이미지 가로 프레임 수\nconst numRows=2;// 이미지 세로 프레임 수\nconst frameX=useRef(0);const frameY=useRef(0);const frameCount=useRef(0);const scale=0.1;// 브릭걸 캐릭터 사이즈\nconst[spriteLoaded,setSpriteLoaded]=useState(false);// 적 우주선 상태\nconst enemiesRef=useRef([]);// 벽돌 관련\nconst bricksRef=useRef([]);const fireBricksRef=useRef(()=>{});const shootCooldownRef=useRef(false);const shootIntervalRef=useRef(null);// 트리플샷 상태\nconst tripleShotTimerRef=useRef(null);const[tripleShot,setTripleShot]=useState(false);// 아이템 상태\nconst itemRef=useRef(null);// 애니메이션 루프\nconst animationRef=useRef();const isTouching=useRef(false);// 별빛 배경\nconst starsRef=useRef([]);// 점수 상태\nconst scoreRef=useRef(0);const[score,setScore]=useState(0);// 게임 상태\nconst[gameOver,setGameOver]=useState(false);const[gameClear,setGameClear]=useState(false);// 별빛 초기화\nuseEffect(()=>{const stars=Array.from({length:100},()=>({x:Math.random()*canvasSize.width,y:Math.random()*canvasSize.height,size:Math.random()*0.8+0.2,speed:Math.random()*1+0.5}));starsRef.current=stars;},[canvasSize]);// 브릭걸 스프라이트 이미지 로드\nuseEffect(()=>{spriteRef.current.src=process.env.PUBLIC_URL+\"/brickgirl_sprite.png\";spriteRef.current.onload=()=>setSpriteLoaded(true);},[]);// 1. tripleShot 상태가 바뀌면 shootInterval을 재시작\nuseEffect(()=>{if(isTouching.current){// 이미 인터벌이 있다면 제거하고 재설정\nif(shootIntervalRef.current){clearInterval(shootIntervalRef.current);}shootIntervalRef.current=setInterval(()=>{fireBricksRef.current();},250);}return()=>clearInterval(shootIntervalRef.current);},[tripleShot]);// fireBricks 함수 최신 상태 반영\nuseEffect(()=>{fireBricksRef.current=()=>{const baseY=girlYRef.current;if(tripleShot){bricksRef.current.push({x:girlX+10,y:baseY+50,speedX:6,speedY:0});bricksRef.current.push({x:girlX+10,y:baseY+30,speedX:6,speedY:0});bricksRef.current.push({x:girlX+10,y:baseY+10,speedX:6,speedY:0});}else{bricksRef.current.push({x:girlX+10,y:baseY+30,speedX:6,speedY:0});}};},[tripleShot]);// 게임 main 루프 실행\nuseEffect(()=>{if(!spriteLoaded)return;// 이미지가 아직 로드되지 않으면 실행 X\nconst canvas=canvasRef.current;const ctx=canvas.getContext(\"2d\");const draw=()=>{ctx.clearRect(0,0,canvas.width,canvas.height);ctx.fillStyle=\"black\";ctx.fillRect(0,0,canvas.width,canvas.height);// 배경 별빛\nctx.fillStyle=\"white\";starsRef.current.forEach(star=>{star.x-=star.speed;if(star.x<0)star.x=canvas.width;ctx.beginPath();ctx.arc(star.x,star.y,star.size,0,Math.PI*2);ctx.fill();});// 게임 종료 처리\nif(gameOver||gameClear){// GA 추적\ngtag(\"event\",\"game_over\",{event_category:\"game\",event_label:\"brickgirl\"});const centerX=canvas.width/2;const centerY=canvas.height/2;ctx.font=\"16px 'Press Start 2P'\";ctx.textAlign=\"center\";ctx.fillStyle=\"white\";ctx.fillText(gameOver?\"😥 GAME OVER\":\"🎉 MISSION COMPLETE!\",centerX,centerY-20);ctx.font=\"13px 'Press Start 2P'\";ctx.fillStyle=\"#93c5fd\";ctx.fillText(\"Tap or Press R to Restart\",centerX,centerY+20);return;// draw 중단\n}// 브릭걸 스프라이트 그리기\nctx.drawImage(spriteRef.current,frameX.current*frameWidth,frameY.current*frameHeight,frameWidth,frameHeight,girlX,girlYRef.current,frameWidth*scale,frameHeight*scale);// 프레임 전환 애니메이션\nif(frameCount.current%10===0){frameX.current=(frameX.current+1)%numCols;if(frameX.current===0)frameY.current=(frameY.current+1)%numRows;}frameCount.current++;// 브릭걸 이동\nif(keys.current.up&&girlYRef.current>-5)girlYRef.current-=girlSpeed;// 20 숫자를 줄이면 위로 더 이동 가능(10)\nif(keys.current.down&&girlYRef.current<canvas.height-50)girlYRef.current+=girlSpeed;// -20 숫자를 올리면 위로 이동(-50)\n// 벽돌 그리기\nctx.font=\"16px Arial\";bricksRef.current.forEach((b,i)=>{b.x+=b.speedX;b.y+=b.speedY;ctx.fillText(\"🧱\",b.x,b.y);// 적과 충돌 확인\nenemiesRef.current.forEach((e,j)=>{const dx=b.x-e.x,dy=b.y-e.y,dist=Math.sqrt(dx*dx+dy*dy);if(dist<20){enemiesRef.current.splice(j,1);bricksRef.current.splice(i,1);scoreRef.current++;setScore(scoreRef.current);if(scoreRef.current>=50)setGameClear(true);}});});// 적 이동 및 충돌\nctx.fillStyle=\"#f472b6\";ctx.font=\"20px Arial\";enemiesRef.current.forEach((e,i)=>{e.x-=e.speed;ctx.fillText(e.emoji,e.x,e.y);// 브릭걸의 hitbox (가로, 세로)\nconst girlTop=girlYRef.current;const girlBottom=girlYRef.current+frameHeight*0.06;const girlLeft=girlX;const girlRight=girlX+frameWidth*0.07;// 적(enemy)의 hitbox (주로 ±10)\nconst enemyTop=e.y-5;const enemyBottom=e.y+5;const enemyLeft=e.x-5;const enemyRight=e.x+5;// AABB 방식 충돌 판정\nconst isColliding=girlRight>enemyLeft&&girlLeft<enemyRight&&girlBottom>enemyTop&&girlTop<enemyBottom;if(isColliding)setGameOver(true);if(e.x<-30){enemiesRef.current.splice(i,1);scoreRef.current=Math.max(0,scoreRef.current-1);setScore(scoreRef.current);}});// 아이템 등장\nif(itemRef.current){// 아이템 그리기\nctx.font=\"20px Arial\";ctx.fillText(\"⭐\",itemRef.current.x,itemRef.current.y);// 아이템과 브릭걸 충돌 체크\nitemRef.current.x-=itemRef.current.speed;const girlRight=girlX+frameWidth*scale;const girlBottom=girlYRef.current+frameHeight*scale;if(itemRef.current.x<girlRight&&// 아이템이 브릭걸보다 왼쪽으로 들어오고\nitemRef.current.y>girlYRef.current&&// 아이템이 브릭걸보다 아래쪽이며\nitemRef.current.y<girlBottom// 아이템이 브릭걸보다 위쪽\n){// 트리플샷 발동\nsetTripleShot(true);clearTimeout(tripleShotTimerRef.current);tripleShotTimerRef.current=setTimeout(()=>setTripleShot(false),5000);// 아이템 제거\nitemRef.current=null;}// 화면 밖으로 나가면 제거\nif(itemRef.current&&itemRef.current.x<-20){itemRef.current=null;}}// 점수 & 트리플샷 표시\nctx.font=\"13px 'Press Start 2P'\";ctx.fillStyle=\"#fbbf24\";ctx.fillText(`Score: ${scoreRef.current}`,10,30);if(tripleShot){ctx.fillStyle=\"#60a5fa\";ctx.fillText(\"🔥Triple Shot!\",150,30);}// 반복 호출\nanimationRef.current=requestAnimationFrame(draw);};animationRef.current=requestAnimationFrame(draw);// draw();\nconst onTouchStart=e=>{if(gameOver||gameClear){// GA 게임 재시작 추적 mobile\ngtag(\"event\",\"BG_game_restart_mo\",{event_category:\"game\",event_label:\"brickgirl\"});window.location.reload();return;}const touchY=e.touches[0].clientY-canvasRef.current.getBoundingClientRect().top;girlYRef.current=Math.min(Math.max(touchY,20),canvasRef.current.height-20);isTouching.current=true;// 인터벌 시작 (기존 인터벌 정리)\nif(shootIntervalRef.current){clearInterval(shootIntervalRef.current);}fireBricksRef.current();// 첫 발사\nshootIntervalRef.current=setInterval(()=>{fireBricksRef.current();},250);};const onTouchMove=e=>{const touchY=e.touches[0].clientY-canvas.getBoundingClientRect().top;girlYRef.current=Math.min(Math.max(touchY,0),canvas.height-frameHeight*scale);};const onTouchEnd=()=>{isTouching.current=false;clearInterval(shootIntervalRef.current);shootIntervalRef.current=null;};// 키보드 이벤트\nwindow.addEventListener(\"keydown\",e=>{if([\"ArrowUp\",\"ArrowDown\",\" \"].includes(e.key)){e.preventDefault();// 스크롤 방지\n}if(e.key===\"ArrowUp\")keys.current.up=true;if(e.key===\"ArrowDown\")keys.current.down=true;if(e.key===\" \"&&!shootCooldownRef.current&&!gameOver){fireBricksRef.current();}if((e.key===\"r\"||e.key===\"R\")&&(gameOver||gameClear)){// GA 게임 재시작 추적 pc\ngtag(\"event\",\"BG_game_restart_pc\",{event_category:\"game\",event_label:\"brickgirl\"});window.location.reload();}});window.addEventListener(\"keyup\",e=>{if(e.key===\"ArrowUp\")keys.current.up=false;if(e.key===\"ArrowDown\")keys.current.down=false;});// 이벤트 바인딩\ncanvas.addEventListener(\"touchstart\",onTouchStart,{passive:false});canvas.addEventListener(\"touchmove\",onTouchMove,{passive:false});canvas.addEventListener(\"touchend\",onTouchEnd,{passive:false});return()=>{cancelAnimationFrame(animationRef.current);clearInterval(shootIntervalRef.current);};},[spriteLoaded,canvasSize,gameOver,gameClear,tripleShot]);// 적 등장 간격\nuseEffect(()=>{const interval=setInterval(()=>{if(!gameOver&&!gameClear){const emojis=[\"🚀\",\"👽\",\"🛸\"];enemiesRef.current.push({x:canvasSize.width+20,y:Math.random()*(canvasSize.height-20)+10,speed:Math.random()*1.5+1.5,emoji:emojis[Math.floor(Math.random()*emojis.length)]});}},1500);return()=>clearInterval(interval);},[canvasSize,gameOver,gameClear]);// 아이템 생성\nuseEffect(()=>{const interval=setInterval(()=>{if(!gameOver&&!gameClear&&!itemRef.current){itemRef.current={x:canvasSize.width+20,y:Math.random()*(canvasSize.height-30)+10,speed:2};}},10000);return()=>clearInterval(interval);},[canvasSize,gameOver,gameClear]);// 반응형 캔버스\nuseEffect(()=>{const updateSize=()=>{const width=Math.min(window.innerWidth-10,480);const height=Math.round(width*0.75);setCanvasSize({width,height});};updateSize();window.addEventListener(\"resize\",updateSize);return()=>window.removeEventListener(\"resize\",updateSize);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center mt-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-press font-bold mb-4 text-rose-400\",children:\"\\uD83E\\uDDF1Brick Girl: Space Defense\\uD83C\\uDF20\"}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,width:canvasSize.width,height:canvasSize.height,className:\"bg-black rounded shadow-md touch-none\",style:{width:\"100%\",maxWidth:\"480px\"}}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-center mt-4 text-gray-500 dark:text-gray-400 font-press\",children:\"\\u2B06 UP \\u2B07 DOWN \\u2022 SPACE BAR \\uD83E\\uDDF1\"})]});}","map":{"version":3,"names":["useEffect","useRef","useState","jsx","_jsx","jsxs","_jsxs","Game","canvasRef","canvasSize","setCanvasSize","width","height","girlX","girlYRef","girlSpeed","keys","up","down","spriteRef","Image","frameWidth","frameHeight","numCols","numRows","frameX","frameY","frameCount","scale","spriteLoaded","setSpriteLoaded","enemiesRef","bricksRef","fireBricksRef","shootCooldownRef","shootIntervalRef","tripleShotTimerRef","tripleShot","setTripleShot","itemRef","animationRef","isTouching","starsRef","scoreRef","score","setScore","gameOver","setGameOver","gameClear","setGameClear","stars","Array","from","length","x","Math","random","y","size","speed","current","src","process","env","PUBLIC_URL","onload","clearInterval","setInterval","baseY","push","speedX","speedY","canvas","ctx","getContext","draw","clearRect","fillStyle","fillRect","forEach","star","beginPath","arc","PI","fill","gtag","event_category","event_label","centerX","centerY","font","textAlign","fillText","drawImage","b","i","e","j","dx","dy","dist","sqrt","splice","emoji","girlTop","girlBottom","girlLeft","girlRight","enemyTop","enemyBottom","enemyLeft","enemyRight","isColliding","max","clearTimeout","setTimeout","requestAnimationFrame","onTouchStart","window","location","reload","touchY","touches","clientY","getBoundingClientRect","top","min","onTouchMove","onTouchEnd","addEventListener","includes","key","preventDefault","passive","cancelAnimationFrame","interval","emojis","floor","updateSize","innerWidth","round","removeEventListener","className","children","ref","style","maxWidth"],"sources":["C:/workspace/portfolio/src/games/BrickGirlSD.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\n\r\nexport default function Game() {\r\n    const canvasRef = useRef(null);\r\n    const [canvasSize, setCanvasSize] = useState({ width: 400, height: 300 });\r\n\r\n    // 브릭걸 위치 및 이동 관련\r\n    const girlX = 30;\r\n    const girlYRef = useRef(150);\r\n    const girlSpeed = 4;\r\n    const keys = useRef({ up: false, down: false });\r\n\r\n    // 스프라이트 애니메이션 관련 설정\r\n    const spriteRef = useRef(new Image());\r\n    const frameWidth = 335;   // Math.floor(1024 / 3) = 341\r\n    const frameHeight = 512;  // Math.floor(1024 / 2) = 512\r\n    const numCols = 3;  // 이미지 가로 프레임 수\r\n    const numRows = 2;  // 이미지 세로 프레임 수\r\n    const frameX = useRef(0);\r\n    const frameY = useRef(0);\r\n    const frameCount = useRef(0);\r\n    const scale = 0.1;  // 브릭걸 캐릭터 사이즈\r\n    const [spriteLoaded, setSpriteLoaded] = useState(false);\r\n\r\n    // 적 우주선 상태\r\n    const enemiesRef = useRef([]);\r\n\r\n    // 벽돌 관련\r\n    const bricksRef = useRef([]);\r\n    const fireBricksRef = useRef(() => { });\r\n    const shootCooldownRef = useRef(false);\r\n    const shootIntervalRef = useRef(null);\r\n\r\n    // 트리플샷 상태\r\n    const tripleShotTimerRef = useRef(null);\r\n    const [tripleShot, setTripleShot] = useState(false);\r\n\r\n    // 아이템 상태\r\n    const itemRef = useRef(null);\r\n\r\n    // 애니메이션 루프\r\n    const animationRef = useRef();\r\n    const isTouching = useRef(false);\r\n\r\n    // 별빛 배경\r\n    const starsRef = useRef([]);\r\n\r\n    // 점수 상태\r\n    const scoreRef = useRef(0);\r\n    const [score, setScore] = useState(0);\r\n\r\n    // 게임 상태\r\n    const [gameOver, setGameOver] = useState(false);\r\n    const [gameClear, setGameClear] = useState(false);\r\n\r\n    // 별빛 초기화\r\n    useEffect(() => {\r\n        const stars = Array.from({ length: 100 }, () => ({\r\n            x: Math.random() * canvasSize.width,\r\n            y: Math.random() * canvasSize.height,\r\n            size: Math.random() * 0.8 + 0.2,\r\n            speed: Math.random() * 1 + 0.5,\r\n        }));\r\n        starsRef.current = stars;\r\n    }, [canvasSize]);\r\n\r\n    // 브릭걸 스프라이트 이미지 로드\r\n    useEffect(() => {\r\n        spriteRef.current.src = process.env.PUBLIC_URL + \"/brickgirl_sprite.png\";\r\n        spriteRef.current.onload = () => setSpriteLoaded(true);\r\n    }, []);\r\n\r\n    // 1. tripleShot 상태가 바뀌면 shootInterval을 재시작\r\n    useEffect(() => {\r\n        if (isTouching.current) {\r\n            // 이미 인터벌이 있다면 제거하고 재설정\r\n            if (shootIntervalRef.current) {\r\n                clearInterval(shootIntervalRef.current);\r\n            }\r\n            shootIntervalRef.current = setInterval(() => {\r\n                fireBricksRef.current();\r\n            }, 250);\r\n        }\r\n\r\n        return () => clearInterval(shootIntervalRef.current);\r\n    }, [tripleShot]);\r\n\r\n    // fireBricks 함수 최신 상태 반영\r\n    useEffect(() => {\r\n        fireBricksRef.current = () => {\r\n            const baseY = girlYRef.current;\r\n            if (tripleShot) {\r\n                bricksRef.current.push({ x: girlX + 10, y: baseY + 50, speedX: 6, speedY: 0 });\r\n                bricksRef.current.push({ x: girlX + 10, y: baseY + 30, speedX: 6, speedY: 0 });\r\n                bricksRef.current.push({ x: girlX + 10, y: baseY + 10, speedX: 6, speedY: 0 });\r\n            } else {\r\n                bricksRef.current.push({ x: girlX + 10, y: baseY + 30, speedX: 6, speedY: 0 });\r\n            }\r\n        };\r\n    }, [tripleShot]);\r\n\r\n    // 게임 main 루프 실행\r\n    useEffect(() => {\r\n        if (!spriteLoaded) return;  // 이미지가 아직 로드되지 않으면 실행 X\r\n\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext(\"2d\");\r\n\r\n        const draw = () => {\r\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n            ctx.fillStyle = \"black\";\r\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n            // 배경 별빛\r\n            ctx.fillStyle = \"white\";\r\n            starsRef.current.forEach((star) => {\r\n                star.x -= star.speed;\r\n                if (star.x < 0) star.x = canvas.width;\r\n                ctx.beginPath();\r\n                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);\r\n                ctx.fill();\r\n            });\r\n\r\n            // 게임 종료 처리\r\n            if (gameOver || gameClear) {\r\n                // GA 추적\r\n                gtag(\"event\", \"game_over\", {\r\n                    event_category: \"game\",\r\n                    event_label: \"brickgirl\",\r\n                });\r\n\r\n                const centerX = canvas.width / 2;\r\n                const centerY = canvas.height / 2;\r\n                ctx.font = \"16px 'Press Start 2P'\";\r\n                ctx.textAlign = \"center\";\r\n                ctx.fillStyle = \"white\";\r\n                ctx.fillText(gameOver ? \"😥 GAME OVER\" : \"🎉 MISSION COMPLETE!\", centerX, centerY - 20);\r\n                ctx.font = \"13px 'Press Start 2P'\";\r\n                ctx.fillStyle = \"#93c5fd\";\r\n                ctx.fillText(\"Tap or Press R to Restart\", centerX, centerY + 20);\r\n                return; // draw 중단\r\n            }\r\n\r\n            // 브릭걸 스프라이트 그리기\r\n            ctx.drawImage(\r\n                spriteRef.current,\r\n                frameX.current * frameWidth,\r\n                frameY.current * frameHeight,\r\n                frameWidth,\r\n                frameHeight,\r\n                girlX,\r\n                girlYRef.current,\r\n                frameWidth * scale,\r\n                frameHeight * scale\r\n            );\r\n\r\n            // 프레임 전환 애니메이션\r\n            if (frameCount.current % 10 === 0) {\r\n                frameX.current = (frameX.current + 1) % numCols;\r\n                if (frameX.current === 0) frameY.current = (frameY.current + 1) % numRows;\r\n            }\r\n            frameCount.current++;\r\n\r\n            // 브릭걸 이동\r\n            if (keys.current.up && girlYRef.current > -5) girlYRef.current -= girlSpeed;    // 20 숫자를 줄이면 위로 더 이동 가능(10)\r\n            if (keys.current.down && girlYRef.current < canvas.height - 50) girlYRef.current += girlSpeed;  // -20 숫자를 올리면 위로 이동(-50)\r\n\r\n            // 벽돌 그리기\r\n            ctx.font = \"16px Arial\";\r\n            bricksRef.current.forEach((b, i) => {\r\n                b.x += b.speedX;\r\n                b.y += b.speedY;\r\n                ctx.fillText(\"🧱\", b.x, b.y);\r\n\r\n                // 적과 충돌 확인\r\n                enemiesRef.current.forEach((e, j) => {\r\n                    const dx = b.x - e.x, dy = b.y - e.y, dist = Math.sqrt(dx * dx + dy * dy);\r\n                    if (dist < 20) {\r\n                        enemiesRef.current.splice(j, 1);\r\n                        bricksRef.current.splice(i, 1);\r\n                        scoreRef.current++;\r\n                        setScore(scoreRef.current);\r\n                        if (scoreRef.current >= 50) setGameClear(true);\r\n                    }\r\n                });\r\n            });\r\n\r\n            // 적 이동 및 충돌\r\n            ctx.fillStyle = \"#f472b6\";\r\n            ctx.font = \"20px Arial\";\r\n\r\n            enemiesRef.current.forEach((e, i) => {\r\n                e.x -= e.speed;\r\n                ctx.fillText(e.emoji, e.x, e.y);\r\n\r\n                // 브릭걸의 hitbox (가로, 세로)\r\n                const girlTop = girlYRef.current;\r\n                const girlBottom = girlYRef.current + frameHeight * 0.06;\r\n                const girlLeft = girlX;\r\n                const girlRight = girlX + frameWidth * 0.07;\r\n\r\n                // 적(enemy)의 hitbox (주로 ±10)\r\n                const enemyTop = e.y - 5;\r\n                const enemyBottom = e.y + 5;\r\n                const enemyLeft = e.x - 5;\r\n                const enemyRight = e.x + 5;\r\n\r\n                // AABB 방식 충돌 판정\r\n                const isColliding =\r\n                    girlRight > enemyLeft &&\r\n                    girlLeft < enemyRight &&\r\n                    girlBottom > enemyTop &&\r\n                    girlTop < enemyBottom;\r\n\r\n                if (isColliding)\r\n                    setGameOver(true);\r\n                if (e.x < -30) {\r\n                    enemiesRef.current.splice(i, 1);\r\n                    scoreRef.current = Math.max(0, scoreRef.current - 1);\r\n                    setScore(scoreRef.current);\r\n                }\r\n            });\r\n\r\n            // 아이템 등장\r\n            if (itemRef.current) {\r\n                // 아이템 그리기\r\n                ctx.font = \"20px Arial\";\r\n                ctx.fillText(\"⭐\", itemRef.current.x, itemRef.current.y);\r\n\r\n                // 아이템과 브릭걸 충돌 체크\r\n                itemRef.current.x -= itemRef.current.speed;\r\n                const girlRight = girlX + frameWidth * scale;\r\n                const girlBottom = girlYRef.current + frameHeight * scale;\r\n                if (\r\n                    itemRef.current.x < girlRight &&            // 아이템이 브릭걸보다 왼쪽으로 들어오고\r\n                    itemRef.current.y > girlYRef.current &&     // 아이템이 브릭걸보다 아래쪽이며\r\n                    itemRef.current.y < girlBottom              // 아이템이 브릭걸보다 위쪽\r\n                ) {\r\n                    // 트리플샷 발동\r\n                    setTripleShot(true);\r\n                    clearTimeout(tripleShotTimerRef.current);\r\n                    tripleShotTimerRef.current = setTimeout(() => setTripleShot(false), 5000);\r\n                    // 아이템 제거\r\n                    itemRef.current = null;\r\n                }\r\n                // 화면 밖으로 나가면 제거\r\n                if (itemRef.current && itemRef.current.x < -20) {\r\n                    itemRef.current = null;\r\n                }\r\n            }\r\n\r\n            // 점수 & 트리플샷 표시\r\n            ctx.font = \"13px 'Press Start 2P'\";\r\n            ctx.fillStyle = \"#fbbf24\";\r\n            ctx.fillText(`Score: ${scoreRef.current}`, 10, 30);\r\n\r\n            if (tripleShot) {\r\n                ctx.fillStyle = \"#60a5fa\";\r\n                ctx.fillText(\"🔥Triple Shot!\", 150, 30);\r\n            }\r\n            // 반복 호출\r\n            animationRef.current = requestAnimationFrame(draw);\r\n        };\r\n\r\n        animationRef.current = requestAnimationFrame(draw);\r\n\r\n        // draw();\r\n\r\n        const onTouchStart = (e) => {\r\n            if (gameOver || gameClear) {\r\n                // GA 게임 재시작 추적 mobile\r\n                gtag(\"event\", \"BG_game_restart_mo\", {\r\n                    event_category: \"game\",\r\n                    event_label: \"brickgirl\",\r\n                });\r\n\r\n                window.location.reload();\r\n                return;\r\n            }\r\n\r\n            const touchY = e.touches[0].clientY - canvasRef.current.getBoundingClientRect().top;\r\n            girlYRef.current = Math.min(Math.max(touchY, 20), canvasRef.current.height - 20);\r\n\r\n            isTouching.current = true;\r\n\r\n            // 인터벌 시작 (기존 인터벌 정리)\r\n            if (shootIntervalRef.current) {\r\n                clearInterval(shootIntervalRef.current);\r\n            }\r\n            fireBricksRef.current(); // 첫 발사\r\n            shootIntervalRef.current = setInterval(() => {\r\n                fireBricksRef.current();\r\n            }, 250);\r\n        };\r\n\r\n        const onTouchMove = (e) => {\r\n            const touchY = e.touches[0].clientY - canvas.getBoundingClientRect().top;\r\n            girlYRef.current = Math.min(Math.max(touchY, 0), canvas.height - frameHeight * scale);\r\n        };\r\n\r\n        const onTouchEnd = () => {\r\n            isTouching.current = false;\r\n            clearInterval(shootIntervalRef.current);\r\n            shootIntervalRef.current = null;\r\n        };\r\n\r\n        // 키보드 이벤트\r\n        window.addEventListener(\"keydown\", (e) => {\r\n            if ([\"ArrowUp\", \"ArrowDown\", \" \"].includes(e.key)) {\r\n                e.preventDefault(); // 스크롤 방지\r\n            }\r\n\r\n            if (e.key === \"ArrowUp\") keys.current.up = true;\r\n            if (e.key === \"ArrowDown\") keys.current.down = true;\r\n            if (e.key === \" \" && !shootCooldownRef.current && !gameOver) {\r\n                fireBricksRef.current();\r\n            }\r\n            if ((e.key === \"r\" || e.key === \"R\") && (gameOver || gameClear)) {\r\n                // GA 게임 재시작 추적 pc\r\n                gtag(\"event\", \"BG_game_restart_pc\", {\r\n                    event_category: \"game\",\r\n                    event_label: \"brickgirl\",\r\n                });\r\n                \r\n                window.location.reload();\r\n            }\r\n        });\r\n\r\n        window.addEventListener(\"keyup\", (e) => {\r\n            if (e.key === \"ArrowUp\") keys.current.up = false;\r\n            if (e.key === \"ArrowDown\") keys.current.down = false;\r\n        });\r\n\r\n\r\n        // 이벤트 바인딩\r\n        canvas.addEventListener(\"touchstart\", onTouchStart, { passive: false });\r\n        canvas.addEventListener(\"touchmove\", onTouchMove, { passive: false });\r\n        canvas.addEventListener(\"touchend\", onTouchEnd, { passive: false });\r\n\r\n        return () => {\r\n            cancelAnimationFrame(animationRef.current);\r\n            clearInterval(shootIntervalRef.current);\r\n        };\r\n    }, [spriteLoaded, canvasSize, gameOver, gameClear, tripleShot]);\r\n\r\n\r\n    // 적 등장 간격\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            if (!gameOver && !gameClear) {\r\n                const emojis = [\"🚀\", \"👽\", \"🛸\"];\r\n                enemiesRef.current.push({\r\n                    x: canvasSize.width + 20,\r\n                    y: Math.random() * (canvasSize.height - 20) + 10,\r\n                    speed: Math.random() * 1.5 + 1.5,\r\n                    emoji: emojis[Math.floor(Math.random() * emojis.length)],\r\n                });\r\n            }\r\n        }, 1500);\r\n        return () => clearInterval(interval);\r\n    }, [canvasSize, gameOver, gameClear]);\r\n\r\n    // 아이템 생성\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            if (!gameOver && !gameClear && !itemRef.current) {\r\n                itemRef.current = {\r\n                    x: canvasSize.width + 20,\r\n                    y: Math.random() * (canvasSize.height - 30) + 10,\r\n                    speed: 2,\r\n                };\r\n            }\r\n        }, 10000);\r\n        return () => clearInterval(interval);\r\n    }, [canvasSize, gameOver, gameClear]);\r\n\r\n    // 반응형 캔버스\r\n    useEffect(() => {\r\n        const updateSize = () => {\r\n            const width = Math.min(window.innerWidth - 10, 480);\r\n            const height = Math.round(width * 0.75);\r\n            setCanvasSize({ width, height });\r\n        };\r\n        updateSize();\r\n        window.addEventListener(\"resize\", updateSize);\r\n        return () => window.removeEventListener(\"resize\", updateSize);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center mt-6\">\r\n            <h2 className=\"font-press font-bold mb-4 text-rose-400\">🧱Brick Girl: Space Defense🌠</h2>\r\n            <canvas\r\n                ref={canvasRef}\r\n                width={canvasSize.width}\r\n                height={canvasSize.height}\r\n                className=\"bg-black rounded shadow-md touch-none\"\r\n                style={{ width: \"100%\", maxWidth: \"480px\" }}\r\n            />\r\n            <p className=\"text-xs text-center mt-4 text-gray-500 dark:text-gray-400 font-press\">\r\n                ⬆ UP ⬇ DOWN • SPACE BAR 🧱\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}